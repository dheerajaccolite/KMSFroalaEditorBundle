!function(o,r){"object"==typeof exports&&"undefined"!=typeof module?r(require("FroalaEditor")):"function"==typeof define&&define.amd?define(["FroalaEditor"],r):r(o.FroalaEditor)}(this,function(k){"use strict";k=k&&k.hasOwnProperty("default")?k["default"]:k,Object.assign(k.POPUP_TEMPLATES,{"textColor.picker":"[_BUTTONS_][_TEXT_COLORS_][_CUSTOM_COLOR_]","backgroundColor.picker":"[_BUTTONS_][_BACKGROUND_COLORS_][_CUSTOM_COLOR_]"}),Object.assign(k.DEFAULTS,{colorsText:["#61BD6D","#1ABC9C","#54ACD2","#2C82C9","#9365B8","#475577","#CCCCCC","#41A85F","#00A885","#3D8EB9","#2969B0","#553982","#28324E","#000000","#F7DA64","#FBA026","#EB6B56","#E25041","#A38F84","#EFEFEF","#FFFFFF","#FAC51C","#F37934","#D14841","#B8312F","#7C706B","#D1D5D8","REMOVE"],colorsBackground:["#61BD6D","#1ABC9C","#54ACD2","#2C82C9","#9365B8","#475577","#CCCCCC","#41A85F","#00A885","#3D8EB9","#2969B0","#553982","#28324E","#000000","#F7DA64","#FBA026","#EB6B56","#E25041","#A38F84","#EFEFEF","#FFFFFF","#FAC51C","#F37934","#D14841","#B8312F","#7C706B","#D1D5D8","REMOVE"],colorsStep:7,colorsHEXInput:!0,colorsButtons:["colorsBack","|","-"]}),k.PLUGINS.colors=function(g){var E=g.$,c='<div class="fr-color-hex-layer fr-active fr-layer" id="fr-color-hex-layer- \n  '.concat(g.id,'"><div class="fr-input-line"><input maxlength="7" id="[ID]"\n  type="text" placeholder="').concat(g.language.translate("HEX Color"),'" \n  tabIndex="1" aria-required="true"></div><div class="fr-action-buttons"><button \n  type="button" class="fr-command fr-submit" data-cmd="[COMMAND]" tabIndex="2" role="button">\n  ').concat(g.language.translate("OK"),"</button></div></div>");function n(o){for(var r="text"===o?g.opts.colorsText:g.opts.colorsBackground,t='<div class="fr-color-set fr-'+o+'-color fr-selected-set">',e=0;e<r.length;e++)0!==e&&e%g.opts.colorsStep==0&&(t+="<br>"),"REMOVE"!==r[e]?t+='<span class="fr-command fr-select-color" style="background: '+r[e]+';" tabIndex="-1" aria-selected="false" role="button" data-cmd="apply'+o+'Color" data-param1="'+r[e]+'"><span class="fr-sr-only">'+g.language.translate("Color")+" "+r[e]+"&nbsp;&nbsp;&nbsp;</span></span>":t+='<span class="fr-command fr-select-color" data-cmd="apply'+o+'Color" tabIndex="-1" role="button" data-param1="REMOVE" title="'+g.language.translate("Clear Formatting")+'">'+g.icon.create("remove")+'<span class="fr-sr-only">'+g.language.translate("Clear Formatting")+"</span></span>";return t+"</div>"}function l(o){var r,t=g.popups.get(o+"Color.picker"),e=E(g.selection.element());r="background"===o?"background-color":"color";var a=t.find(".fr-"+o+"-color .fr-select-color");for(a.find(".fr-selected-color").remove(),a.removeClass("fr-active-item"),a.not('[data-param1="REMOVE"]').attr("aria-selected",!1);e.get(0)!==g.el;){if("transparent"!==e.css(r)&&"rgba(0, 0, 0, 0)"!==e.css(r)){var l=t.find(".fr-"+o+'-color .fr-select-color[data-param1="'+g.helpers.RGBToHex(e.css(r))+'"]');l.append('<span class="fr-selected-color" aria-hidden="true">\uf00c</span>'),l.addClass("fr-active-item").attr("aria-selected",!0);break}e=e.parent()}!function s(o){var r=g.popups.get(o+"Color.picker"),t=r.find(".fr-"+o+"-color .fr-active-item").attr("data-param1"),e=r.find(".fr-color-hex-layer input"),a=r.find('.fr-colors-tab[data-param1="'+o+'"]');e.length&&a.hasClass("fr-selected-tab")&&E(e.val(t).input).trigger("change")}(o)}function e(o){"REMOVE"!==o?g.format.applyStyle("background-color",g.helpers.HEXtoRGB(o)):g.format.removeStyle("background-color"),g.popups.hide("backgroundColor.picker")}function a(o){"REMOVE"!==o?g.format.applyStyle("color",g.helpers.HEXtoRGB(o)):g.format.removeStyle("color"),g.popups.hide("textColor.picker")}return{showColorsPopup:function i(o){var r=g.$tb.find('.fr-command[data-cmd="'+o+'"]'),t=g.popups.get(o+".picker");if(t||(t=function s(o){var r="";g.opts.toolbarInline&&0<g.opts.colorsButtons.length&&(r+='<div class="fr-buttons fr-colors-buttons">\n        '.concat(g.button.buildList(g.opts.colorsButtons),"\n        </div>"));var t,e="";t="textColor"===o?(g.opts.colorsHEXInput&&(e=c.replace(/\[ID\]/g,"fr-color-hex-layer-text-"+g.id).replace(/\[COMMAND\]/g,"customTextColor")),{buttons:r,text_colors:n("text"),custom_color:e}):(g.opts.colorsHEXInput&&(e=c.replace(/\[ID\]/g,"fr-color-hex-layer-background-"+g.id).replace(/\[COMMAND\]/g,"customBackgroundColor")),{buttons:r,background_colors:n("background"),custom_color:e});var a=g.popups.create(o+".picker",t);return function l(C,b){g.events.on("popup.tab",function(o){var r=E(o.currentTarget);if(!g.popups.isVisible(b)||!r.is("span"))return!0;var t=o.which,e=!0;if(k.KEYCODE.TAB===t){var a=C.find(".fr-buttons");e=!g.accessibility.focusToolbar(a,!!o.shiftKey)}else if(k.KEYCODE.ARROW_UP===t||k.KEYCODE.ARROW_DOWN===t||k.KEYCODE.ARROW_LEFT===t||k.KEYCODE.ARROW_RIGHT===t){if(r.is("span.fr-select-color")){var l=r.parent().find("span.fr-select-color"),s=l.index(r),c=g.opts.colorsStep,n=Math.floor(l.length/c),i=s%c,p=Math.floor(s/c),u=p*c+i,d=n*c;k.KEYCODE.ARROW_UP===t?u=((u-c)%d+d)%d:k.KEYCODE.ARROW_DOWN===t?u=(u+c)%d:k.KEYCODE.ARROW_LEFT===t?u=((u-1)%d+d)%d:k.KEYCODE.ARROW_RIGHT===t&&(u=(u+1)%d);var f=E(l.get(u));g.events.disableBlur(),f.focus(),e=!1}}else k.KEYCODE.ENTER===t&&(g.button.exec(r),e=!1);return!1===e&&(o.preventDefault(),o.stopPropagation()),e},!0)}(a,o+".picker"),a}(o)),!t.hasClass("fr-active"))if(g.popups.setContainer(o+".picker",g.$tb),l("textColor"===o?"text":"background"),r.isVisible()){var e=r.offset().left,a=r.offset().top+(g.opts.toolbarBottom?10:r.outerHeight()-10);g.popups.show(o+".picker",e,a,r.outerHeight())}else g.position.forSelection(t),g.popups.show(o+".picker")},background:e,customColor:function s(o){var r=g.popups.get(o+"Color.picker").find(".fr-color-hex-layer input");if(r.length){var t=r.val();"background"===o?e(t):a(t)}},text:a,back:function o(){g.popups.hide("textColor.picker"),g.popups.hide("backgroundColor.picker"),g.toolbar.showInline()}}},k.DefineIcon("textColor",{NAME:"textColor",SVG_KEY:"textColor"}),k.RegisterCommand("textColor",{title:"Text Color",undo:!1,focus:!0,refreshOnCallback:!1,popup:!0,callback:function(){this.popups.isVisible("textColor.picker")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("textColor.picker")):this.colors.showColorsPopup("textColor")}}),k.RegisterCommand("applytextColor",{undo:!0,callback:function(o,r){this.colors.text(r)}}),k.RegisterCommand("customTextColor",{title:"OK",undo:!0,callback:function(){this.colors.customColor("text")}}),k.DefineIcon("backgroundColor",{NAME:"backgroundColor",SVG_KEY:"backgroundColor"}),k.RegisterCommand("backgroundColor",{title:"Background Color",undo:!1,focus:!0,refreshOnCallback:!1,popup:!0,callback:function(){this.popups.isVisible("backgroundColor.picker")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("backgroundColor.picker")):this.colors.showColorsPopup("backgroundColor")}}),k.RegisterCommand("applybackgroundColor",{undo:!0,callback:function(o,r){this.colors.background(r)}}),k.RegisterCommand("customBackgroundColor",{title:"OK",undo:!0,callback:function(){this.colors.customColor("background")}}),k.DefineIcon("colorsBack",{NAME:"arrow-left",SVG_KEY:"back"}),k.RegisterCommand("colorsBack",{title:"Back",undo:!1,focus:!1,back:!0,refreshAfterCallback:!1,callback:function(){this.colors.back()}}),k.DefineIcon("remove",{NAME:"eraser",SVG_KEY:"remove"})});